<!DOCTYPE HTML>
<html>
<head>

<title>Sequencer_table</title>
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type"/>
<link rel="stylesheet" href="style.css" type="text/css"/>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"> </script>
<script type="text/javascript" src="doc_loader.js"> </script>
</head>
<body>

<h1>Module Sequencer_table</h1>
<pre><span class="keyword">module</span> Sequencer_table</pre><div class="info">A table of sequencers indexed by key, so that at any moment for each key there is at
    most one job running.<br/>    An <code class="code">'a Sequencer_table.Make(Key).t</code> is similar in concept to:<br/>    <pre class="codepre"><code class="code">
      { mutable state : 'a option;
        jobs  : 'a option Throttle.Sequencer.t;
      } Key.Table.t
    </code></pre><br/>    It allows one to run jobs that are indexed by a key, while allowing jobs with distinct
    keys to run simultaneously, and ensuring that for any given key, at most one job with
    that key is running at a time.  A sequencer table maintains optional state for each
    key, and supplies that state to each running job indexed by that key.<br/>    The implementation of a sequencer table is optimized for having a large number of keys
    with state, while only a few keys with active jobs at any given time.  So, it is
    implemented with two tables, one of states and one of sequencers:<br/>    <pre class="codepre"><code class="code">
      { states : 'a Key.Table.t;
        jobs   : ('a option -&gt; unit Deferred.t) Sequencer.t Key.Table.t;
      }
    </code></pre><br/>    The implementation automatically adds a sequencer to the <code class="code">jobs</code> table, if necessary,
    when one adds a job, and automatically removes a sequencer from the <code class="code">jobs</code> table
    whenever the sequencer has no jobs to run.<br/>    The implementation does not automatically release state; one must call <code class="code">set_state t
    ~key None</code>.</div>
<hr/>
<div file="Sequencer_table.html.contents" class="content_to_load"> </div>
</body>
</html>