<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Std.Packed_map.html">
<link rel="next" href="Std.Printc.html">
<link rel="Up" href="Std.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Alternating_primary_backup_assignment" rel="Chapter" href="Alternating_primary_backup_assignment.html">
<link title="Atomic_edit" rel="Chapter" href="Atomic_edit.html">
<link title="Bin_io_utils" rel="Chapter" href="Bin_io_utils.html">
<link title="Bitarray" rel="Chapter" href="Bitarray.html">
<link title="Cache" rel="Chapter" href="Cache.html">
<link title="Cbuffer" rel="Chapter" href="Cbuffer.html">
<link title="Color_print" rel="Chapter" href="Color_print.html">
<link title="Crit_bit" rel="Chapter" href="Crit_bit.html">
<link title="Csv_writer" rel="Chapter" href="Csv_writer.html">
<link title="Deprecated_bench" rel="Chapter" href="Deprecated_bench.html">
<link title="Deprecated_command" rel="Chapter" href="Deprecated_command.html">
<link title="Deprecated_fcommand" rel="Chapter" href="Deprecated_fcommand.html">
<link title="Deprecated_service_command" rel="Chapter" href="Deprecated_service_command.html">
<link title="Documented_match_statement" rel="Chapter" href="Documented_match_statement.html">
<link title="English" rel="Chapter" href="English.html">
<link title="Environment" rel="Chapter" href="Environment.html">
<link title="Exception_check" rel="Chapter" href="Exception_check.html">
<link title="Extended_array" rel="Chapter" href="Extended_array.html">
<link title="Extended_common" rel="Chapter" href="Extended_common.html">
<link title="Extended_exn" rel="Chapter" href="Extended_exn.html">
<link title="Extended_filename" rel="Chapter" href="Extended_filename.html">
<link title="Extended_float" rel="Chapter" href="Extended_float.html">
<link title="Extended_gc" rel="Chapter" href="Extended_gc.html">
<link title="Extended_hashtbl" rel="Chapter" href="Extended_hashtbl.html">
<link title="Extended_int" rel="Chapter" href="Extended_int.html">
<link title="Extended_int32" rel="Chapter" href="Extended_int32.html">
<link title="Extended_int63" rel="Chapter" href="Extended_int63.html">
<link title="Extended_int64" rel="Chapter" href="Extended_int64.html">
<link title="Extended_linux" rel="Chapter" href="Extended_linux.html">
<link title="Extended_list" rel="Chapter" href="Extended_list.html">
<link title="Extended_list__LCS" rel="Chapter" href="Extended_list__LCS.html">
<link title="Extended_list__multimerge" rel="Chapter" href="Extended_list__multimerge.html">
<link title="Extended_memo" rel="Chapter" href="Extended_memo.html">
<link title="Extended_monad" rel="Chapter" href="Extended_monad.html">
<link title="Extended_nativeint" rel="Chapter" href="Extended_nativeint.html">
<link title="Extended_option" rel="Chapter" href="Extended_option.html">
<link title="Extended_result" rel="Chapter" href="Extended_result.html">
<link title="Extended_sexp" rel="Chapter" href="Extended_sexp.html">
<link title="Extended_string" rel="Chapter" href="Extended_string.html">
<link title="Extended_sys" rel="Chapter" href="Extended_sys.html">
<link title="Extended_thread" rel="Chapter" href="Extended_thread.html">
<link title="Extended_time" rel="Chapter" href="Extended_time.html">
<link title="Extended_unix" rel="Chapter" href="Extended_unix.html">
<link title="Extra_fields" rel="Chapter" href="Extra_fields.html">
<link title="Fd_leak_check" rel="Chapter" href="Fd_leak_check.html">
<link title="Find" rel="Chapter" href="Find.html">
<link title="Fold_map" rel="Chapter" href="Fold_map.html">
<link title="Generic" rel="Chapter" href="Generic.html">
<link title="Invariant" rel="Chapter" href="Invariant.html">
<link title="Invocation" rel="Chapter" href="Invocation.html">
<link title="Iter" rel="Chapter" href="Iter.html">
<link title="Lazy_list" rel="Chapter" href="Lazy_list.html">
<link title="Lazy_m" rel="Chapter" href="Lazy_m.html">
<link title="Lazy_sequence" rel="Chapter" href="Lazy_sequence.html">
<link title="Linebuf" rel="Chapter" href="Linebuf.html">
<link title="List_zipper" rel="Chapter" href="List_zipper.html">
<link title="Logger" rel="Chapter" href="Logger.html">
<link title="Loggers" rel="Chapter" href="Loggers.html">
<link title="Low_level_debug" rel="Chapter" href="Low_level_debug.html">
<link title="Malloc" rel="Chapter" href="Malloc.html">
<link title="Multi_map" rel="Chapter" href="Multi_map.html">
<link title="Net_utils" rel="Chapter" href="Net_utils.html">
<link title="Number" rel="Chapter" href="Number.html">
<link title="Packed_array" rel="Chapter" href="Packed_array.html">
<link title="Packed_map" rel="Chapter" href="Packed_map.html">
<link title="Patience_diff" rel="Chapter" href="Patience_diff.html">
<link title="Posix_clock" rel="Chapter" href="Posix_clock.html">
<link title="Pp" rel="Chapter" href="Pp.html">
<link title="Printc" rel="Chapter" href="Printc.html">
<link title="Process" rel="Chapter" href="Process.html">
<link title="Procfs" rel="Chapter" href="Procfs.html">
<link title="Prod_or_test" rel="Chapter" href="Prod_or_test.html">
<link title="Random_selection" rel="Chapter" href="Random_selection.html">
<link title="Readline" rel="Chapter" href="Readline.html">
<link title="Readline__input_char" rel="Chapter" href="Readline__input_char.html">
<link title="Readline__input_loop" rel="Chapter" href="Readline__input_loop.html">
<link title="Runtime_blockout_detector" rel="Chapter" href="Runtime_blockout_detector.html">
<link title="Rw_mutex" rel="Chapter" href="Rw_mutex.html">
<link title="Sampler" rel="Chapter" href="Sampler.html">
<link title="Search_foo" rel="Chapter" href="Search_foo.html">
<link title="Selector" rel="Chapter" href="Selector.html">
<link title="Semaphore" rel="Chapter" href="Semaphore.html">
<link title="Sendmail" rel="Chapter" href="Sendmail.html">
<link title="Service_command" rel="Chapter" href="Service_command.html">
<link title="Shell" rel="Chapter" href="Shell.html">
<link title="Shell__core" rel="Chapter" href="Shell__core.html">
<link title="Shell__line_buffer" rel="Chapter" href="Shell__line_buffer.html">
<link title="Sntp" rel="Chapter" href="Sntp.html">
<link title="Splay_tree" rel="Chapter" href="Splay_tree.html">
<link title="Stats_reporting" rel="Chapter" href="Stats_reporting.html">
<link title="Std" rel="Chapter" href="Std.html">
<link title="String_zipper" rel="Chapter" href="String_zipper.html">
<link title="Syslog" rel="Chapter" href="Syslog.html">
<link title="Sys_utils" rel="Chapter" href="Sys_utils.html">
<link title="Tcp" rel="Chapter" href="Tcp.html">
<link title="Text_block" rel="Chapter" href="Text_block.html">
<link title="Time_stamp_counter" rel="Chapter" href="Time_stamp_counter.html">
<link title="Timed_function" rel="Chapter" href="Timed_function.html">
<link title="Trie" rel="Chapter" href="Trie.html">
<link title="Unix_utils" rel="Chapter" href="Unix_utils.html">
<link title="Update_queue" rel="Chapter" href="Update_queue.html"><link title="Grouping and nesting" rel="Section" href="#3_Groupingandnesting">
<link title="Pretty Printing" rel="Section" href="#3_PrettyPrinting">
<link title="Auxiliaries" rel="Section" href="#3_Auxiliaries">
<title>Std.Pp</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Std.Packed_map.html" title="Std.Packed_map">Previous</a>
&nbsp;<a class="up" href="Std.html" title="Std">Up</a>
&nbsp;<a class="post" href="Std.Printc.html" title="Std.Printc">Next</a>
</div>
<h1>Module <a href="type_Std.Pp.html">Std.Pp</a></h1>
<pre><span class="keyword">module</span> Pp: <code class="type">Pp</code></pre><hr width="100%">
<br>
This is a pretty printing library originally written by Christian Lindig and
   released under the Copyleft licence for the
   <a href="http://www.cminusminus.org">c--</a> project. The design of this library is
   discussed in the article
   "<a href=" http://citeseer.ist.psu.edu/lindig00strictly.html">Strictly pretty</a>".
<p>

   The pretty printer provided by the <code class="code">Pp</code> module is intended for tree-like
   structures.  Documents are represented by an abstract type <code class="code">t</code>. A document
   can be printed to a file or a string and during this process the pretty
   printer decides about the final outcome of the document. The only parameter
   it takes into account is the total line width and the number of characters a
   sub-document occupies.
<p>

   A document of type <code class="code">t</code> can be very small entity like a single word.
   Functions combine small documents to larger ones which then can be pretty
   printed.<br>
<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> </pre>

<pre><span id="VALempty"><span class="keyword">val</span> empty</span> : <code class="type"><a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
The empty document is pretty printed to the empty string. Typically <code class="code">empty</code>
is used in one branch of an <code class="code">if</code> statement.<br>
</div>
<pre><span id="VAL($)"><span class="keyword">val</span> ($)</span> : <code class="type"><a href="Pp.html#TYPEt">t</a> -> <a href="Pp.html#TYPEt">t</a> -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
The infix operator <code class="code">x $ y</code> concatenates two documents <code class="code">x</code> and <code class="code">y</code> into a
larger one.  It does not introduce any space or other separation between the two
original documents.<br>
</div>
<pre><span id="VALtext"><span class="keyword">val</span> text</span> : <code class="type">string -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
The <code class="code">text</code> function turns a string into a document. The pretty printed
representation of the resulting document is exactly the string <code class="code">text</code> was
applied to.<br>
</div>
<pre><span id="VALbreak"><span class="keyword">val</span> break</span> : <code class="type"><a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
The important points in a document are so-called <code class="code">break</code>s.  A <code class="code">break</code> can be
either represented by a single space or a newline followed by a number of spaces.
The pretty printer makes this decision based on the available space.  So think
of a <code class="code">break</code> as a space that might come out as a newline.  To give the pretty
printer enough flexibility documents must be joined with <code class="code">break</code>s:
<code class="code">x $ break $ y</code>.<br>
</div>
<pre><span id="VALbreak_null"><span class="keyword">val</span> break_null</span> : <code class="type"><a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">break_null</code> behaves like <code class="code">break</code> except it does not insert anything when no
newline is inserted.<br>
</div>
<pre><span id="VALbreak_with"><span class="keyword">val</span> break_with</span> : <code class="type">string -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
The space character used by <code class="code">break</code> my be not always appropriate. The
function <code class="code">break_with s</code> behaves like <code class="code">break</code> except that it uses a user supplied
string <code class="code">s</code> instead of the space.<br>
</div>
<br>
<h3 id="3_Groupingandnesting">Grouping and nesting</h3>
The pretty printer considers the representation of <code class="code">break</code>s not one by one but
looks at all <code class="code">break</code>s of a sub-document. Documents are structured into
sub-documents by group-operators. Different group operators exist to control the
behavior of the pretty printer.<br>
<pre><span id="VALnest"><span class="keyword">val</span> nest</span> : <code class="type">int -> <a href="Pp.html#TYPEt">t</a> -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
When the pretty printer decides to represent a <code class="code">break</code> as a newline it also
prints some spaces after it to indent the following line. The number of spaces
is controlled by the <code class="code">nest</code> operator that takes a document as argument:
<code class="code">nest n d</code>. All breaks turned to newlines inside document <code class="code">d</code> are followed by <code class="code">n</code>
spaces.  The <code class="code">nest</code> operator nests properly such that it takes the spaces
introduced by <code class="code">nest</code>s on the outer level also into account.<br>
</div>
<pre><span id="VALhgrp"><span class="keyword">val</span> hgrp</span> : <code class="type"><a href="Pp.html#TYPEt">t</a> -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
A group operator takes a document and let it become a group.  The <code class="code">hgrp</code>
operator creates a <i>horizontal</i> group.  Breaks inside a <code class="code">hgrp</code> are never
turned into newlines but always come out as spaces. This group has a very
limited usefulness because it easily overruns any given line length.<br>
</div>
<pre><span id="VALvgrp"><span class="keyword">val</span> vgrp</span> : <code class="type"><a href="Pp.html#TYPEt">t</a> -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
The <code class="code">vgrp</code> operator creates a <i>vertical</i> group. All <code class="code">break</code>s inside a
<code class="code">vgrp</code> are represented as newlines followed by spaces. Although all <code class="code">break</code>s
come out as newlines the indentation of lines inside the group may differ:
nesting is independent of grouping and thus different nesting levels can be
active in the same group.  Because of the fixed pretty printing strategy <code class="code">vgrp</code>s
are used mostly at the top level of documents only.<br>
</div>
<pre><span id="VALagrp"><span class="keyword">val</span> agrp</span> : <code class="type"><a href="Pp.html#TYPEt">t</a> -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
The <i>automatic</i> group <code class="code">agrp</code> is the most versatile. Breaks inside this
group are either all turned into newlines (followed by spaces), or into spaces.
Subgroups are, of course, not affected but considered individually.<br>
</div>
<pre><span id="VALfgrp"><span class="keyword">val</span> fgrp</span> : <code class="type"><a href="Pp.html#TYPEt">t</a> -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
The break policy inside an <code class="code">agrp</code> is fixed for all breaks of the group.
Inside a <i>flexible</i> group <code class="code">fgrp</code> each <code class="code">break</code> is considered individually: when
the document up to the next <code class="code">break</code> fits into the current line the <code class="code">break</code> comes
out as space. Otherwise it comes out as newline followed by spaces.<br>
</div>
<br>
<h3 id="3_PrettyPrinting">Pretty Printing</h3><br>
<pre><span id="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type">?width:int -> <a href="Pp.html#TYPEt">t</a> -> string</code></pre><pre><span id="VALto_file"><span class="keyword">val</span> to_file</span> : <code class="type">?width:int -> Pervasives.out_channel -> <a href="Pp.html#TYPEt">t</a> -> unit</code></pre><br>
<h3 id="3_Auxiliaries">Auxiliaries</h3><br>
<pre><span id="VALlist"><span class="keyword">val</span> list</span> : <code class="type">sep:<a href="Pp.html#TYPEt">t</a> -> f:('a -> <a href="Pp.html#TYPEt">t</a>) -> 'a list -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
A list of objects which are seperated by some seperator is very common. The
<code class="code">list sep f</code> function takes care to insert the separator only between objects
but not at the end of the list. It creates a <code class="code">sep</code> separated list.  Individual
items are printed using <code class="code">f</code>. For the common case where commas are used for
separating we also provide an extra definition<br>
</div>
<pre><span id="VALcommalist"><span class="keyword">val</span> commalist</span> : <code class="type">f:('a -> <a href="Pp.html#TYPEt">t</a>) -> 'a list -> <a href="Pp.html#TYPEt">t</a></code></pre><pre><span id="VAL($/)"><span class="keyword">val</span> ($/)</span> : <code class="type"><a href="Pp.html#TYPEt">t</a> -> <a href="Pp.html#TYPEt">t</a> -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
Instead of writing <code class="code">x $ break $ y</code> to insert a <code class="code">break</code> it is convenient to
define an operator for this: <code class="code">x ^/ y</code> joins <code class="code">x</code> and <code class="code">y</code> with a <code class="code">break</code>.<br>
</div>
<pre><span id="VAL($//)"><span class="keyword">val</span> ($//)</span> : <code class="type"><a href="Pp.html#TYPEt">t</a> -> <a href="Pp.html#TYPEt">t</a> -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
Joins two documents with a <code class="code">break_null</code>.<br>
</div>
<pre><span id="VALblock"><span class="keyword">val</span> block</span> : <code class="type">?indent:int -> f:('a -> <a href="Pp.html#TYPEt">t</a>) -> 'a list -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
A <code class="code">block</code> contains objects <code class="code">xs</code> formatted by <code class="code">f</code> and enclosed by curly
braces. Its body will be indented in case it does not fit on a single line.
The default indentation is 4<br>
</div>
<pre><span class="keyword">module</span> <a href="Pp.Infix.html">Infix</a>: <code class="code">sig</code> <a href="Pp.Infix.html">..</a> <code class="code">end</code></pre><pre><span id="VALhlist"><span class="keyword">val</span> hlist</span> : <code class="type"><a href="Pp.html#TYPEt">t</a> list -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
<pre class="codepre"><code class="code"> hlist [x1,..,xn] = hgrp [x1; break; x2; ...; break; xn) </code></pre><br>
</div>
<pre><span id="VALvlist"><span class="keyword">val</span> vlist</span> : <code class="type"><a href="Pp.html#TYPEt">t</a> list -> <a href="Pp.html#TYPEt">t</a></code></pre><div class="info">
<pre class="codepre"><code class="code"> vlist [x1,..,xn] = vgrp [x1; break; x2; ...; break; xn) </code></pre><br>
</div>
<pre><span id="VALalist"><span class="keyword">val</span> alist</span> : <code class="type"><a href="Pp.html#TYPEt">t</a> list -> <a href="Pp.html#TYPEt">t</a></code></pre></body></html>