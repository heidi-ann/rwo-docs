<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Caml.html">
<link rel="next" href="Commutative_group.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Array_permute" rel="Chapter" href="Array_permute.html">
<link title="Avltree" rel="Chapter" href="Avltree.html">
<link title="Bag" rel="Chapter" href="Bag.html">
<link title="Bigbuffer_internal" rel="Chapter" href="Bigbuffer_internal.html">
<link title="Bigbuffer" rel="Chapter" href="Bigbuffer.html">
<link title="Bigstring_marshal" rel="Chapter" href="Bigstring_marshal.html">
<link title="Bigstring" rel="Chapter" href="Bigstring.html">
<link title="Bigsubstring" rel="Chapter" href="Bigsubstring.html">
<link title="Binable0" rel="Chapter" href="Binable0.html">
<link title="Binable" rel="Chapter" href="Binable.html">
<link title="Binary_packing" rel="Chapter" href="Binary_packing.html">
<link title="Blang" rel="Chapter" href="Blang.html">
<link title="Blit" rel="Chapter" href="Blit.html">
<link title="Blit_intf" rel="Chapter" href="Blit_intf.html">
<link title="Bool" rel="Chapter" href="Bool.html">
<link title="Bounded_int_table" rel="Chapter" href="Bounded_int_table.html">
<link title="Bucket" rel="Chapter" href="Bucket.html">
<link title="Byte_units" rel="Chapter" href="Byte_units.html">
<link title="Caml" rel="Chapter" href="Caml.html">
<link title="Common" rel="Chapter" href="Common.html">
<link title="Commutative_group" rel="Chapter" href="Commutative_group.html">
<link title="Comparable_intf" rel="Chapter" href="Comparable_intf.html">
<link title="Comparable" rel="Chapter" href="Comparable.html">
<link title="Comparator" rel="Chapter" href="Comparator.html">
<link title="Constrained_float" rel="Chapter" href="Constrained_float.html">
<link title="Container" rel="Chapter" href="Container.html">
<link title="Container_unit_tests" rel="Chapter" href="Container_unit_tests.html">
<link title="Core_arg" rel="Chapter" href="Core_arg.html">
<link title="Core_array" rel="Chapter" href="Core_array.html">
<link title="Core_bin_prot" rel="Chapter" href="Core_bin_prot.html">
<link title="Core_char" rel="Chapter" href="Core_char.html">
<link title="Core_field" rel="Chapter" href="Core_field.html">
<link title="Core_gc" rel="Chapter" href="Core_gc.html">
<link title="Core_hashtbl_intf" rel="Chapter" href="Core_hashtbl_intf.html">
<link title="Core_hashtbl" rel="Chapter" href="Core_hashtbl.html">
<link title="Core_int32" rel="Chapter" href="Core_int32.html">
<link title="Core_int63" rel="Chapter" href="Core_int63.html">
<link title="Core_int64" rel="Chapter" href="Core_int64.html">
<link title="Core_int" rel="Chapter" href="Core_int.html">
<link title="Core_lazy" rel="Chapter" href="Core_lazy.html">
<link title="Core_list" rel="Chapter" href="Core_list.html">
<link title="Core_map_intf" rel="Chapter" href="Core_map_intf.html">
<link title="Core_map" rel="Chapter" href="Core_map.html">
<link title="Core_map_unit_tests" rel="Chapter" href="Core_map_unit_tests.html">
<link title="Core_nativeint" rel="Chapter" href="Core_nativeint.html">
<link title="Core_printexc" rel="Chapter" href="Core_printexc.html">
<link title="Core_printf" rel="Chapter" href="Core_printf.html">
<link title="Core_queue" rel="Chapter" href="Core_queue.html">
<link title="Core_random" rel="Chapter" href="Core_random.html">
<link title="Core_set_intf" rel="Chapter" href="Core_set_intf.html">
<link title="Core_set" rel="Chapter" href="Core_set.html">
<link title="Core_set_unit_tests" rel="Chapter" href="Core_set_unit_tests.html">
<link title="Core_sexp" rel="Chapter" href="Core_sexp.html">
<link title="Core_stack" rel="Chapter" href="Core_stack.html">
<link title="Core_string" rel="Chapter" href="Core_string.html">
<link title="Core_weak" rel="Chapter" href="Core_weak.html">
<link title="Day_of_week" rel="Chapter" href="Day_of_week.html">
<link title="Dequeue" rel="Chapter" href="Dequeue.html">
<link title="Doubly_linked" rel="Chapter" href="Doubly_linked.html">
<link title="Equal" rel="Chapter" href="Equal.html">
<link title="Error" rel="Chapter" href="Error.html">
<link title="Exn" rel="Chapter" href="Exn.html">
<link title="Flags_intf" rel="Chapter" href="Flags_intf.html">
<link title="Flags" rel="Chapter" href="Flags.html">
<link title="Flat_array" rel="Chapter" href="Flat_array.html">
<link title="Flat_array_debug" rel="Chapter" href="Flat_array_debug.html">
<link title="Flat_array_unit_tests" rel="Chapter" href="Flat_array_unit_tests.html">
<link title="Floatable" rel="Chapter" href="Floatable.html">
<link title="Float_intf" rel="Chapter" href="Float_intf.html">
<link title="Float" rel="Chapter" href="Float.html">
<link title="Float_robust_compare" rel="Chapter" href="Float_robust_compare.html">
<link title="Fn" rel="Chapter" href="Fn.html">
<link title="Force_once" rel="Chapter" href="Force_once.html">
<link title="Fqueue" rel="Chapter" href="Fqueue.html">
<link title="Hashable" rel="Chapter" href="Hashable.html">
<link title="Hash_heap" rel="Chapter" href="Hash_heap.html">
<link title="Hash_queue" rel="Chapter" href="Hash_queue.html">
<link title="Hash_set_intf" rel="Chapter" href="Hash_set_intf.html">
<link title="Hash_set" rel="Chapter" href="Hash_set.html">
<link title="Hashtbl_unit_tests" rel="Chapter" href="Hashtbl_unit_tests.html">
<link title="Heap_block" rel="Chapter" href="Heap_block.html">
<link title="Heap" rel="Chapter" href="Heap.html">
<link title="Host_and_port" rel="Chapter" href="Host_and_port.html">
<link title="Identifiable" rel="Chapter" href="Identifiable.html">
<link title="Import" rel="Chapter" href="Import.html">
<link title="In_channel" rel="Chapter" href="In_channel.html">
<link title="Info" rel="Chapter" href="Info.html">
<link title="Intable" rel="Chapter" href="Intable.html">
<link title="Int_conversions" rel="Chapter" href="Int_conversions.html">
<link title="Interfaces" rel="Chapter" href="Interfaces.html">
<link title="Interned_string" rel="Chapter" href="Interned_string.html">
<link title="Int_intf" rel="Chapter" href="Int_intf.html">
<link title="Int_math" rel="Chapter" href="Int_math.html">
<link title="Int_replace_polymorphic_compare" rel="Chapter" href="Int_replace_polymorphic_compare.html">
<link title="Int_set" rel="Chapter" href="Int_set.html">
<link title="Invariant" rel="Chapter" href="Invariant.html">
<link title="Invariant_intf" rel="Chapter" href="Invariant_intf.html">
<link title="Linked_stack" rel="Chapter" href="Linked_stack.html">
<link title="Make_substring" rel="Chapter" href="Make_substring.html">
<link title="Memo" rel="Chapter" href="Memo.html">
<link title="Monad" rel="Chapter" href="Monad.html">
<link title="Month" rel="Chapter" href="Month.html">
<link title="Never_returns" rel="Chapter" href="Never_returns.html">
<link title="No_polymorphic_compare" rel="Chapter" href="No_polymorphic_compare.html">
<link title="Nothing0" rel="Chapter" href="Nothing0.html">
<link title="Nothing" rel="Chapter" href="Nothing.html">
<link title="Obj_array" rel="Chapter" href="Obj_array.html">
<link title="Only_in_test" rel="Chapter" href="Only_in_test.html">
<link title="Option" rel="Chapter" href="Option.html">
<link title="Ordered_collection_common" rel="Chapter" href="Ordered_collection_common.html">
<link title="Ordering" rel="Chapter" href="Ordering.html">
<link title="Or_error" rel="Chapter" href="Or_error.html">
<link title="Out_channel" rel="Chapter" href="Out_channel.html">
<link title="Pid" rel="Chapter" href="Pid.html">
<link title="Polymorphic_compare_intf" rel="Chapter" href="Polymorphic_compare_intf.html">
<link title="Polymorphic_compare" rel="Chapter" href="Polymorphic_compare.html">
<link title="Pool" rel="Chapter" href="Pool.html">
<link title="Pool_intf" rel="Chapter" href="Pool_intf.html">
<link title="Pool_unit_tests" rel="Chapter" href="Pool_unit_tests.html">
<link title="Pooled_hashtbl" rel="Chapter" href="Pooled_hashtbl.html">
<link title="Pooled_hashtbl_unit_test" rel="Chapter" href="Pooled_hashtbl_unit_test.html">
<link title="Pretty_printer" rel="Chapter" href="Pretty_printer.html">
<link title="Quickcheck" rel="Chapter" href="Quickcheck.html">
<link title="Ref" rel="Chapter" href="Ref.html">
<link title="Result" rel="Chapter" href="Result.html">
<link title="Robustly_comparable" rel="Chapter" href="Robustly_comparable.html">
<link title="Set_once" rel="Chapter" href="Set_once.html">
<link title="Sexpable" rel="Chapter" href="Sexpable.html">
<link title="Source_code_position0" rel="Chapter" href="Source_code_position0.html">
<link title="Source_code_position" rel="Chapter" href="Source_code_position.html">
<link title="Stable_containers" rel="Chapter" href="Stable_containers.html">
<link title="Stable_internal" rel="Chapter" href="Stable_internal.html">
<link title="Stable" rel="Chapter" href="Stable.html">
<link title="Stable_unit_test_intf" rel="Chapter" href="Stable_unit_test_intf.html">
<link title="Stable_unit_test" rel="Chapter" href="Stable_unit_test.html">
<link title="Stack_intf" rel="Chapter" href="Stack_intf.html">
<link title="Stack_unit_tests" rel="Chapter" href="Stack_unit_tests.html">
<link title="Staged" rel="Chapter" href="Staged.html">
<link title="Std_common" rel="Chapter" href="Std_common.html">
<link title="Std_internal" rel="Chapter" href="Std_internal.html">
<link title="Std_kernel" rel="Chapter" href="Std_kernel.html">
<link title="Std" rel="Chapter" href="Std.html">
<link title="Stringable" rel="Chapter" href="Stringable.html">
<link title="String_id" rel="Chapter" href="String_id.html">
<link title="Substring_intf" rel="Chapter" href="Substring_intf.html">
<link title="Substring" rel="Chapter" href="Substring.html">
<link title="Thread_safe_queue" rel="Chapter" href="Thread_safe_queue.html">
<link title="T" rel="Chapter" href="T.html">
<link title="Tuple" rel="Chapter" href="Tuple.html">
<link title="Tuple_type" rel="Chapter" href="Tuple_type.html">
<link title="Tuple_type_intf" rel="Chapter" href="Tuple_type_intf.html">
<link title="Type_equal" rel="Chapter" href="Type_equal.html">
<link title="Union_find" rel="Chapter" href="Union_find.html">
<link title="Unique_id_intf" rel="Chapter" href="Unique_id_intf.html">
<link title="Unique_id" rel="Chapter" href="Unique_id.html">
<link title="Unit" rel="Chapter" href="Unit.html">
<link title="Univ_map" rel="Chapter" href="Univ_map.html">
<link title="Univ" rel="Chapter" href="Univ.html">
<link title="Unpack_buffer" rel="Chapter" href="Unpack_buffer.html">
<link title="Validated_intf" rel="Chapter" href="Validated_intf.html">
<link title="Validated" rel="Chapter" href="Validated.html">
<link title="Validate" rel="Chapter" href="Validate.html">
<link title="With_return" rel="Chapter" href="With_return.html">
<link title="Word_size" rel="Chapter" href="Word_size.html"><link title="Error handling" rel="Section" href="#6_Errorhandling">
<link title="Input Output" rel="Section" href="#6_InputOutput">
<link title="Deprecated operations" rel="Section" href="#6_Deprecatedoperations">
<link title="Error handling" rel="Section" href="#6_Errorhandling">
<link title="Input Output" rel="Section" href="#6_InputOutput">
<link title="triple handling " rel="Section" href="#6_triplehandling">
<link title="Option handling" rel="Section" href="#6_Optionhandling">
<link title="Functions from fn.ml" rel="Section" href="#6_Functionsfromfnml">
<link title="Deprecated operations" rel="Section" href="#6_Deprecatedoperations">
<title>Common</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Caml.html" title="Caml">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Commutative_group.html" title="Commutative_group">Next</a>
</div>
<h1>Module <a href="type_Common.html">Common</a></h1>
<pre><span class="keyword">module</span> Common: <code class="code">sig</code> <a href="Common.html">..</a> <code class="code">end</code></pre><div class="info">
Basic types and definitions required throughout the system.<br>
</div>
<hr width="100%">
<pre><span id="EXCEPTIONBug"><span class="keyword">exception</span> Bug</span> <span class="keyword">of</span> <code class="type">string</code></pre>
<pre><span id="EXCEPTIONFinally"><span class="keyword">exception</span> Finally</span> <span class="keyword">of</span> <code class="type">exn * exn</code></pre>
<div class="info">
Raised when finalization after an exception failed, too.
    The first exception argument is the one raised by the initial
    function, the second exception the one raised by the finalizer.<br>
</div>
<pre><span id="VALunimplemented"><span class="keyword">val</span> unimplemented</span> : <code class="type">string -> 'a <a href="Or_error.html#TYPEt">Or_error.t</a></code></pre><div class="info">
For marking a given value as unimplemented.  Typically combined with conditional
    compilation, where on some platforms the function is defined normally, and on some
    platforms it is defined as unimplemented.  The supplied string should be the name of
    the function that is unimplemented.<br>
</div>
<pre><span id="TYPEdecimal"><span class="keyword">type</span> <code class="type"></code>decimal</span> = <code class="type">float</code> </pre>
<div class="info">
The <code class="code">decimal</code> type alias provides more readable serializations to s-expressions, at
    the cost of lower precision.  For example:
<p>

    <pre class="codepre"><code class="code">    # sexp_of_decimal 3.000000000001;;
    - : Sexp.t = 3
    # sexp_of_float 3.000000000001;;
    - : Sexp.t = 3.0000000000010000889
    </code></pre>
<p>

    Also, the decimal sexp-converter will fail when provided with <code class="code">nan</code> or <code class="code">infinity</code>.
<p>

    <pre class="codepre"><code class="code">    # float_of_sexp (Sexp.Atom "nan");;
    - : float = nan
    # decimal_of_sexp (Sexp.Atom "nan");;
    Exception:
    (Sexplib.Conv.Of_sexp_error (Failure common.ml.Decimal_nan_or_inf) nan).
    </code></pre><br>
</div>

<pre><span id="TYPEread_only"><span class="keyword">type</span> <code class="type"></code>read_only</span> </pre>
<div class="info">
Types for use as markers in phantom types.  One should not expose functions for
    converting between read_only/immutable/read_write because the private types expose the
    subtyping. Users would say "(db :&gt; read_only Db.t)" to cast.  The difference between
    read-only and immutable is that someone else can change a read-only object, while
    immutable never changes.<br>
</div>

<pre><span id="TYPEimmutable"><span class="keyword">type</span> <code class="type"></code>immutable</span> = private <code class="type"><a href="Common.html#TYPEread_only">read_only</a></code> </pre>

<pre><span id="TYPEread_write"><span class="keyword">type</span> <code class="type"></code>read_write</span> = private <code class="type"><a href="Common.html#TYPEread_only">read_only</a></code> </pre>

<pre><span id="TYPEnever_returns"><span class="keyword">type</span> <code class="type"></code>never_returns</span> = <code class="type"><a href="Never_returns.html#TYPEnever_returns">Never_returns.never_returns</a></code> </pre>
<div class="info">
<code class="code">never_returns</code> should be used as the return type of functions that don't return and
    might block forever, rather than <code class="code">'a</code> or <code class="code">_</code>.  This forces callers of such functions
    to have a call to <code class="code">never_returns</code> at the call site, which makes it clear to readers
    what's going on. We do not intend to use this type for functions such as <code class="code">failwithf</code>
    that always raise an exception.<br>
</div>

<pre><span id="VALnever_returns"><span class="keyword">val</span> never_returns</span> : <code class="type"><a href="Common.html#TYPEnever_returns">never_returns</a> -> 'a</code></pre><br>
<h6 id="6_Errorhandling">Error handling</h6><br>
<pre><span id="VALprotect"><span class="keyword">val</span> protect</span> : <code class="type">f:(unit -> 'a) -> finally:(unit -> unit) -> 'a</code></pre><div class="info">
See exn.mli<br>
</div>
<pre><span id="VALprotectx"><span class="keyword">val</span> protectx</span> : <code class="type">f:('b -> 'a) -> 'b -> finally:('b -> unit) -> 'a</code></pre><br>
<h6 id="6_InputOutput">Input Output</h6><br>
<pre><span id="VALfst3"><span class="keyword">val</span> fst3</span> : <code class="type">'a * 'b * 'c -> 'a</code></pre><div class="info">
<h6 id="6_triplehandling">triple handling </h6><br>
</div>
<pre><span id="VALsnd3"><span class="keyword">val</span> snd3</span> : <code class="type">'b * 'a * 'c -> 'a</code></pre><pre><span id="VALtrd3"><span class="keyword">val</span> trd3</span> : <code class="type">'b * 'c * 'a -> 'a</code></pre><pre><span id="VALuw"><span class="keyword">val</span> uw</span> : <code class="type">'a option -> 'a</code></pre><div class="info">
<h6 id="6_Optionhandling">Option handling</h6><br>
</div>
<pre><span id="VALis_none"><span class="keyword">val</span> is_none</span> : <code class="type">'a option -> bool</code></pre><pre><span id="VALis_some"><span class="keyword">val</span> is_some</span> : <code class="type">'a option -> bool</code></pre><pre><span id="VAL(|!)"><span class="keyword">val</span> (|!)</span> : <code class="type">'a -> ('a -> 'b) -> 'b</code></pre><div class="info">
<h6 id="6_Functionsfromfnml">Functions from fn.ml</h6><br>
</div>
<pre><span id="VAL(|>)"><span class="keyword">val</span> (|&gt;)</span> : <code class="type">'a -> ('a -> 'b) -> 'b</code></pre><pre><span id="VALident"><span class="keyword">val</span> ident</span> : <code class="type">'a -> 'a</code></pre><pre><span id="VALconst"><span class="keyword">val</span> const</span> : <code class="type">'a -> 'b -> 'a</code></pre><pre><span id="VAL(==>)"><span class="keyword">val</span> (==&gt;)</span> : <code class="type">bool -> bool -> bool</code></pre><pre><span id="VALfailwiths"><span class="keyword">val</span> failwiths</span> : <code class="type">string -> 'a -> ('a -> <a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t) -> 'b</code></pre><pre><span id="VALfailwithf"><span class="keyword">val</span> failwithf</span> : <code class="type">('r, unit, string, unit -> 'a) Pervasives.format4 -> 'r</code></pre><pre><span id="VALinvalid_argf"><span class="keyword">val</span> invalid_argf</span> : <code class="type">('r, unit, string, unit -> 'a) Pervasives.format4 -> 'r</code></pre><pre><span id="VALok_exn"><span class="keyword">val</span> ok_exn</span> : <code class="type">'a <a href="Or_error.html#TYPEt">Or_error.t</a> -> 'a</code></pre><div class="info">
<code class="code">Or_error.ok_exn</code><br>
</div>
<pre><span id="VALerror"><span class="keyword">val</span> error</span> : <code class="type">string -> 'a -> ('a -> <a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t) -> 'b <a href="Or_error.html#TYPEt">Or_error.t</a></code></pre><div class="info">
<code class="code">Or_error.error</code><br>
</div>
<pre><code><span id="TYPEreturn"><span class="keyword">type</span> <code class="type">'a</code> return</span> = private {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTreturn.return">return</span>&nbsp;:<code class="type">'b. 'a -> 'b</code>;</code></td>

</tr></table>
}

<div class="info">
<code class="code">with_return f</code> allows for something like the return statement in C within <code class="code">f</code>.  There
   are three ways <code class="code">f</code> can terminate:
<p>

   1. If <code class="code">f</code> calls <code class="code">r.return x</code>, then <code class="code">x</code> is returned by <code class="code">with_return</code>.
   2. If <code class="code">f</code> evaluates to a value <code class="code">x</code>, then <code class="code">x</code> is returned by <code class="code">with_return</code>.
   3. If <code class="code">f</code> raises an exception, it escapes <code class="code">with_return</code>.
<p>

   Here is a typical example:
<p>

   <pre class="codepre"><code class="code">   let find l ~f =
     with_return (fun r -&gt;
        List.iter l ~f:(fun x -&gt; if f x then r.return (Some x));
        None
      )
   </code></pre>
<p>

   It is only because of a deficiency of ML types that <code class="code">with_return</code> doesn't have type:
<p>

   <pre class="codepre"><code class="code"> val with_return : 'a. (('a -&gt; ('b. 'b)) -&gt; 'a) -&gt; 'a </code></pre>
<p>

   but we can slightly increase the scope of 'b, without changing the meaning of the type
   and then we get
<p>

   <pre class="codepre"><code class="code">   type 'a return = { return : 'b . 'a -&gt; b }
   val with_return : ('a return -&gt; 'a) -&gt; 'a
   </code></pre>
<p>

   But the actual reason we chose to use a record type with polymorphic field is that
   otherwise we would have to clobber the namespace of functions with <code class="code">return</code> and that is
   undesirable because <code class="code">return</code> would get hidden as soon as we open any monad. We
   considered names different than <code class="code">return</code> but everything seemed worse than just having
   <code class="code">return</code> as a record field. We are clobbering the namespace of record fields but that
   is much more acceptable.<br>
</div>

<pre><span id="VALwith_return"><span class="keyword">val</span> with_return</span> : <code class="type">('a <a href="Common.html#TYPEreturn">return</a> -> 'a) -> 'a</code></pre><pre><span id="VALphys_equal"><span class="keyword">val</span> phys_equal</span> : <code class="type">'a -> 'a -> bool</code></pre><div class="info">
We disable <code class="code">==</code> and <code class="code">!=</code> and replace them with the longer and more mnemonic
    <code class="code">phys_equal</code> because they too easily lead to mistakes (for example they don't even
    work right on Int64 or Float).  One can usually use the <code class="code">equal</code> function for a
    specific type, or use (=) or (&lt;&gt;) for built in types like char, int, float,<br>
</div>
<pre><span id="VAL(==)"><span class="keyword">val</span> (==)</span> : <code class="type">[ `Consider_using_phys_equal ] -><br>       [ `Consider_using_phys_equal ] -> [ `Consider_using_phys_equal ]</code></pre><pre><span id="VAL(!=)"><span class="keyword">val</span> (!=)</span> : <code class="type">[ `Consider_using_phys_equal ] -><br>       [ `Consider_using_phys_equal ] -> [ `Consider_using_phys_equal ]</code></pre><pre><span id="VALforce"><span class="keyword">val</span> force</span> : <code class="type">'a Lazy.t -> 'a</code></pre><pre><span id="VALstage"><span class="keyword">val</span> stage</span> : <code class="type">'a -> 'a <a href="Staged.html#TYPEt">Staged.t</a></code></pre><div class="info">
See <code class="code">module : Staged</code> for documentation<br>
</div>
<pre><span id="VALunstage"><span class="keyword">val</span> unstage</span> : <code class="type">'a <a href="Staged.html#TYPEt">Staged.t</a> -> 'a</code></pre><pre><span id="EXCEPTIONC_malloc_exn"><span class="keyword">exception</span> C_malloc_exn</span> <span class="keyword">of</span> <code class="type">int * int</code></pre>
<div class="info">
Raised if malloc in C bindings fail (errno * size).<br>
</div>
<br>
<h6 id="6_Deprecatedoperations">Deprecated operations</h6>
<p>

  The following section contains definitions that hide operations from the standard
  library that are considered problematic or confusing, or simply redundant.<br>
<pre><span id="VALseek_out"><span class="keyword">val</span> seek_out</span> : <code class="type">[ `Deprecated_use_out_channel ] -><br>       [ `Deprecated_use_out_channel ] -> [ `Deprecated_use_out_channel ]</code></pre><pre><span id="VALpos_out"><span class="keyword">val</span> pos_out</span> : <code class="type">[ `Deprecated_use_out_channel ] -> [ `Deprecated_use_out_channel ]</code></pre><pre><span id="VALout_channel_length"><span class="keyword">val</span> out_channel_length</span> : <code class="type">[ `Deprecated_use_out_channel ] -> [ `Deprecated_use_out_channel ]</code></pre><pre><span id="VALseek_in"><span class="keyword">val</span> seek_in</span> : <code class="type">[ `Deprecated_use_in_channel ] -><br>       [ `Deprecated_use_in_channel ] -> [ `Deprecated_use_in_channel ]</code></pre><pre><span id="VALpos_in"><span class="keyword">val</span> pos_in</span> : <code class="type">[ `Deprecated_use_in_channel ] -> [ `Deprecated_use_in_channel ]</code></pre><pre><span id="VALin_channel_length"><span class="keyword">val</span> in_channel_length</span> : <code class="type">[ `Deprecated_use_in_channel ] -> [ `Deprecated_use_in_channel ]</code></pre><pre><span id="VALmodf"><span class="keyword">val</span> modf</span> : <code class="type">[ `Deprecated_use_float_modf ] -> [ `Deprecated_use_float_modf ]</code></pre><pre><span id="VALtruncate"><span class="keyword">val</span> truncate</span> : <code class="type">[ `Deprecated_use_float_iround_towards_zero ] -><br>       [ `Deprecated_use_float_iround_towards_zero ]</code></pre><pre><span id="VALclose_in"><span class="keyword">val</span> close_in</span> : <code class="type">[ `Deprecated_use_in_channel ] -> [ `Deprecated_use_in_channel ]</code></pre><div class="info">
we have our own version of these two, the INRIA version doesn't release the runtime
    lock.<br>
</div>
<pre><span id="VALclose_out"><span class="keyword">val</span> close_out</span> : <code class="type">[ `Deprecated_use_out_channel ] -> [ `Deprecated_use_out_channel ]</code></pre><pre><span id="VAL(&)"><span class="keyword">val</span> (&amp;)</span> : <code class="type">[ `Deprecated_use_two_ampersands ] -><br>       [ `Deprecated_use_two_ampersands ] -> [ `Deprecated_use_two_ampersands ]</code></pre><pre><span id="VALmax_int"><span class="keyword">val</span> max_int</span> : <code class="type">[ `Deprecated_use_int_module ]</code></pre><pre><span id="VALmin_int"><span class="keyword">val</span> min_int</span> : <code class="type">[ `Deprecated_use_int_module ]</code></pre><pre><span id="VALceil"><span class="keyword">val</span> ceil</span> : <code class="type">[ `Deprecated_use__Float__round_up ] -> [ `Deprecated_use__Float__round_up ]</code></pre><pre><span id="VALfloor"><span class="keyword">val</span> floor</span> : <code class="type">[ `Deprecated_use__Float__round_down ] -><br>       [ `Deprecated_use__Float__round_down ]</code></pre><pre><span id="VALabs_float"><span class="keyword">val</span> abs_float</span> : <code class="type">[ `Deprecated_use_float_module ] -> [ `Deprecated_use_float_module ]</code></pre><pre><span id="VALmod_float"><span class="keyword">val</span> mod_float</span> : <code class="type">[ `Deprecated_use_float_module ] -> [ `Deprecated_use_float_module ]</code></pre><pre><span id="VALfrexp"><span class="keyword">val</span> frexp</span> : <code class="type">[ `Deprecated_use_float_module ] -><br>       [ `Deprecated_use_float_module ] -> [ `Deprecated_use_float_module ]</code></pre><pre><span id="VALldexp"><span class="keyword">val</span> ldexp</span> : <code class="type">[ `Deprecated_use_float_module ] -><br>       [ `Deprecated_use_float_module ] -> [ `Deprecated_use_float_module ]</code></pre><pre><span id="VALfloat_of_int"><span class="keyword">val</span> float_of_int</span> : <code class="type">[ `Deprecated_use_float_module ] -> [ `Deprecated_use_float_module ]</code></pre><pre><span id="VALmax_float"><span class="keyword">val</span> max_float</span> : <code class="type">[ `Deprecated_use_float_module ]</code></pre><pre><span id="VALmin_float"><span class="keyword">val</span> min_float</span> : <code class="type">[ `Deprecated_use_float_module ]</code></pre><pre><span id="VALepsilon_float"><span class="keyword">val</span> epsilon_float</span> : <code class="type">[ `Deprecated_use_float_module ]</code></pre><pre><span id="VALclassify_float"><span class="keyword">val</span> classify_float</span> : <code class="type">[ `Deprecated_use_float_module ] -> [ `Deprecated_use_float_module ]</code></pre><pre><span id="VALstring_of_float"><span class="keyword">val</span> string_of_float</span> : <code class="type">[ `Deprecated_use_float_module ] -> [ `Deprecated_use_float_module ]</code></pre><pre><span id="VALfloat_of_string"><span class="keyword">val</span> float_of_string</span> : <code class="type">[ `Deprecated_use_float_module ] -> [ `Deprecated_use_float_module ]</code></pre><pre><span id="VALinfinity"><span class="keyword">val</span> infinity</span> : <code class="type">[ `Deprecated_use_float_module ]</code></pre><pre><span id="VALneg_infinity"><span class="keyword">val</span> neg_infinity</span> : <code class="type">[ `Deprecated_use_float_module ]</code></pre><pre><span id="VALnan"><span class="keyword">val</span> nan</span> : <code class="type">[ `Deprecated_use_float_module ]</code></pre><pre><span id="VALint_of_float"><span class="keyword">val</span> int_of_float</span> : <code class="type">[ `Deprecated_use_float_module ] -> [ `Deprecated_use_float_module ]</code></pre><pre><span id="TYPEfpclass"><span class="keyword">type</span> <code class="type"></code>fpclass</span> = <code class="type">[ `Deprecated_use_float_module ]</code> </pre>

<pre><span id="VALcompare_decimal"><span class="keyword">val</span> compare_decimal</span> : <code class="type"><a href="Common.html#TYPEdecimal">decimal</a> -> <a href="Common.html#TYPEdecimal">decimal</a> -> int</code></pre><pre><span id="VALdecimal_of_sexp"><span class="keyword">val</span> decimal_of_sexp</span> : <code class="type"><a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t -> <a href="Common.html#TYPEdecimal">decimal</a></code></pre><pre><span id="VALsexp_of_decimal"><span class="keyword">val</span> sexp_of_decimal</span> : <code class="type"><a href="Common.html#TYPEdecimal">decimal</a> -> <a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t</code></pre><pre><span id="VALbin_decimal"><span class="keyword">val</span> bin_decimal</span> : <code class="type"><a href="Common.html#TYPEdecimal">decimal</a> <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.t</code></pre><pre><span id="VALbin_read_decimal"><span class="keyword">val</span> bin_read_decimal</span> : <code class="type"><a href="Common.html#TYPEdecimal">decimal</a> <a href="../bin_prot/Read_ml.html">Bin_prot.Read_ml</a>.reader</code></pre><pre><span id="VALbin_read_decimal_"><span class="keyword">val</span> bin_read_decimal_</span> : <code class="type"><a href="Common.html#TYPEdecimal">decimal</a> <a href="../bin_prot/Unsafe_read_c.html">Bin_prot.Unsafe_read_c</a>.reader</code></pre><pre><span id="VALbin_read_decimal__"><span class="keyword">val</span> bin_read_decimal__</span> : <code class="type">(int -> <a href="Common.html#TYPEdecimal">decimal</a>) <a href="../bin_prot/Unsafe_read_c.html">Bin_prot.Unsafe_read_c</a>.reader</code></pre><pre><span id="VALbin_reader_decimal"><span class="keyword">val</span> bin_reader_decimal</span> : <code class="type"><a href="Common.html#TYPEdecimal">decimal</a> <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.reader</code></pre><pre><span id="VALbin_size_decimal"><span class="keyword">val</span> bin_size_decimal</span> : <code class="type"><a href="Common.html#TYPEdecimal">decimal</a> <a href="../bin_prot/Size.html">Bin_prot.Size</a>.sizer</code></pre><pre><span id="VALbin_write_decimal"><span class="keyword">val</span> bin_write_decimal</span> : <code class="type"><a href="Common.html#TYPEdecimal">decimal</a> <a href="../bin_prot/Write_ml.html">Bin_prot.Write_ml</a>.writer</code></pre><pre><span id="VALbin_write_decimal_"><span class="keyword">val</span> bin_write_decimal_</span> : <code class="type"><a href="Common.html#TYPEdecimal">decimal</a> <a href="../bin_prot/Unsafe_write_c.html">Bin_prot.Unsafe_write_c</a>.writer</code></pre><pre><span id="VALbin_writer_decimal"><span class="keyword">val</span> bin_writer_decimal</span> : <code class="type"><a href="Common.html#TYPEdecimal">decimal</a> <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.writer</code></pre><pre><span id="VALcompare_read_only"><span class="keyword">val</span> compare_read_only</span> : <code class="type"><a href="Common.html#TYPEread_only">read_only</a> -> <a href="Common.html#TYPEread_only">read_only</a> -> int</code></pre><div class="info">
Types for use as markers in phantom types.  One should not expose functions for
    converting between read_only/immutable/read_write because the private types expose the
    subtyping. Users would say "(db :&gt; read_only Db.t)" to cast.  The difference between
    read-only and immutable is that someone else can change a read-only object, while
    immutable never changes.<br>
</div>
<pre><span id="VALbin_read_only"><span class="keyword">val</span> bin_read_only</span> : <code class="type"><a href="Common.html#TYPEread_only">read_only</a> <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.t</code></pre><pre><span id="VALbin_read_read_only"><span class="keyword">val</span> bin_read_read_only</span> : <code class="type"><a href="Common.html#TYPEread_only">read_only</a> <a href="../bin_prot/Read_ml.html">Bin_prot.Read_ml</a>.reader</code></pre><pre><span id="VALbin_read_read_only_"><span class="keyword">val</span> bin_read_read_only_</span> : <code class="type"><a href="Common.html#TYPEread_only">read_only</a> <a href="../bin_prot/Unsafe_read_c.html">Bin_prot.Unsafe_read_c</a>.reader</code></pre><pre><span id="VALbin_read_read_only__"><span class="keyword">val</span> bin_read_read_only__</span> : <code class="type">(int -> <a href="Common.html#TYPEread_only">read_only</a>) <a href="../bin_prot/Unsafe_read_c.html">Bin_prot.Unsafe_read_c</a>.reader</code></pre><pre><span id="VALbin_reader_read_only"><span class="keyword">val</span> bin_reader_read_only</span> : <code class="type"><a href="Common.html#TYPEread_only">read_only</a> <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.reader</code></pre><pre><span id="VALbin_size_read_only"><span class="keyword">val</span> bin_size_read_only</span> : <code class="type"><a href="Common.html#TYPEread_only">read_only</a> <a href="../bin_prot/Size.html">Bin_prot.Size</a>.sizer</code></pre><pre><span id="VALbin_write_read_only"><span class="keyword">val</span> bin_write_read_only</span> : <code class="type"><a href="Common.html#TYPEread_only">read_only</a> <a href="../bin_prot/Write_ml.html">Bin_prot.Write_ml</a>.writer</code></pre><pre><span id="VALbin_write_read_only_"><span class="keyword">val</span> bin_write_read_only_</span> : <code class="type"><a href="Common.html#TYPEread_only">read_only</a> <a href="../bin_prot/Unsafe_write_c.html">Bin_prot.Unsafe_write_c</a>.writer</code></pre><pre><span id="VALbin_writer_read_only"><span class="keyword">val</span> bin_writer_read_only</span> : <code class="type"><a href="Common.html#TYPEread_only">read_only</a> <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.writer</code></pre><pre><span id="VALread_only_of_sexp"><span class="keyword">val</span> read_only_of_sexp</span> : <code class="type"><a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t -> <a href="Common.html#TYPEread_only">read_only</a></code></pre><pre><span id="VALsexp_of_read_only"><span class="keyword">val</span> sexp_of_read_only</span> : <code class="type"><a href="Common.html#TYPEread_only">read_only</a> -> <a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t</code></pre><pre><span id="VALcompare_immutable"><span class="keyword">val</span> compare_immutable</span> : <code class="type"><a href="Common.html#TYPEimmutable">immutable</a> -> <a href="Common.html#TYPEimmutable">immutable</a> -> int</code></pre><pre><span id="VALbin_immutable"><span class="keyword">val</span> bin_immutable</span> : <code class="type"><a href="Common.html#TYPEimmutable">immutable</a> <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.t</code></pre><pre><span id="VALbin_read_immutable"><span class="keyword">val</span> bin_read_immutable</span> : <code class="type"><a href="Common.html#TYPEimmutable">immutable</a> <a href="../bin_prot/Read_ml.html">Bin_prot.Read_ml</a>.reader</code></pre><pre><span id="VALbin_read_immutable_"><span class="keyword">val</span> bin_read_immutable_</span> : <code class="type"><a href="Common.html#TYPEimmutable">immutable</a> <a href="../bin_prot/Unsafe_read_c.html">Bin_prot.Unsafe_read_c</a>.reader</code></pre><pre><span id="VALbin_read_immutable__"><span class="keyword">val</span> bin_read_immutable__</span> : <code class="type">(int -> <a href="Common.html#TYPEimmutable">immutable</a>) <a href="../bin_prot/Unsafe_read_c.html">Bin_prot.Unsafe_read_c</a>.reader</code></pre><pre><span id="VALbin_reader_immutable"><span class="keyword">val</span> bin_reader_immutable</span> : <code class="type"><a href="Common.html#TYPEimmutable">immutable</a> <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.reader</code></pre><pre><span id="VALbin_size_immutable"><span class="keyword">val</span> bin_size_immutable</span> : <code class="type"><a href="Common.html#TYPEimmutable">immutable</a> <a href="../bin_prot/Size.html">Bin_prot.Size</a>.sizer</code></pre><pre><span id="VALbin_write_immutable"><span class="keyword">val</span> bin_write_immutable</span> : <code class="type"><a href="Common.html#TYPEimmutable">immutable</a> <a href="../bin_prot/Write_ml.html">Bin_prot.Write_ml</a>.writer</code></pre><pre><span id="VALbin_write_immutable_"><span class="keyword">val</span> bin_write_immutable_</span> : <code class="type"><a href="Common.html#TYPEimmutable">immutable</a> <a href="../bin_prot/Unsafe_write_c.html">Bin_prot.Unsafe_write_c</a>.writer</code></pre><pre><span id="VALbin_writer_immutable"><span class="keyword">val</span> bin_writer_immutable</span> : <code class="type"><a href="Common.html#TYPEimmutable">immutable</a> <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.writer</code></pre><pre><span id="VALimmutable_of_sexp"><span class="keyword">val</span> immutable_of_sexp</span> : <code class="type"><a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t -> <a href="Common.html#TYPEimmutable">immutable</a></code></pre><pre><span id="VALsexp_of_immutable"><span class="keyword">val</span> sexp_of_immutable</span> : <code class="type"><a href="Common.html#TYPEimmutable">immutable</a> -> <a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t</code></pre><pre><span id="VALcompare_read_write"><span class="keyword">val</span> compare_read_write</span> : <code class="type"><a href="Common.html#TYPEread_write">read_write</a> -> <a href="Common.html#TYPEread_write">read_write</a> -> int</code></pre><pre><span id="VALbin_read_write"><span class="keyword">val</span> bin_read_write</span> : <code class="type"><a href="Common.html#TYPEread_write">read_write</a> <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.t</code></pre><pre><span id="VALbin_read_read_write"><span class="keyword">val</span> bin_read_read_write</span> : <code class="type"><a href="Common.html#TYPEread_write">read_write</a> <a href="../bin_prot/Read_ml.html">Bin_prot.Read_ml</a>.reader</code></pre><pre><span id="VALbin_read_read_write_"><span class="keyword">val</span> bin_read_read_write_</span> : <code class="type"><a href="Common.html#TYPEread_write">read_write</a> <a href="../bin_prot/Unsafe_read_c.html">Bin_prot.Unsafe_read_c</a>.reader</code></pre><pre><span id="VALbin_read_read_write__"><span class="keyword">val</span> bin_read_read_write__</span> : <code class="type">(int -> <a href="Common.html#TYPEread_write">read_write</a>) <a href="../bin_prot/Unsafe_read_c.html">Bin_prot.Unsafe_read_c</a>.reader</code></pre><pre><span id="VALbin_reader_read_write"><span class="keyword">val</span> bin_reader_read_write</span> : <code class="type"><a href="Common.html#TYPEread_write">read_write</a> <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.reader</code></pre><pre><span id="VALbin_size_read_write"><span class="keyword">val</span> bin_size_read_write</span> : <code class="type"><a href="Common.html#TYPEread_write">read_write</a> <a href="../bin_prot/Size.html">Bin_prot.Size</a>.sizer</code></pre><pre><span id="VALbin_write_read_write"><span class="keyword">val</span> bin_write_read_write</span> : <code class="type"><a href="Common.html#TYPEread_write">read_write</a> <a href="../bin_prot/Write_ml.html">Bin_prot.Write_ml</a>.writer</code></pre><pre><span id="VALbin_write_read_write_"><span class="keyword">val</span> bin_write_read_write_</span> : <code class="type"><a href="Common.html#TYPEread_write">read_write</a> <a href="../bin_prot/Unsafe_write_c.html">Bin_prot.Unsafe_write_c</a>.writer</code></pre><pre><span id="VALbin_writer_read_write"><span class="keyword">val</span> bin_writer_read_write</span> : <code class="type"><a href="Common.html#TYPEread_write">read_write</a> <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.writer</code></pre><pre><span id="VALread_write_of_sexp"><span class="keyword">val</span> read_write_of_sexp</span> : <code class="type"><a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t -> <a href="Common.html#TYPEread_write">read_write</a></code></pre><pre><span id="VALsexp_of_read_write"><span class="keyword">val</span> sexp_of_read_write</span> : <code class="type"><a href="Common.html#TYPEread_write">read_write</a> -> <a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t</code></pre><pre><span id="VALsexp_of_never_returns"><span class="keyword">val</span> sexp_of_never_returns</span> : <code class="type"><a href="Common.html#TYPEnever_returns">never_returns</a> -> <a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t</code></pre><div class="info">
<code class="code">never_returns</code> should be used as the return type of functions that don't return and
    might block forever, rather than <code class="code">'a</code> or <code class="code">_</code>.  This forces callers of such functions
    to have a call to <code class="code">never_returns</code> at the call site, which makes it clear to readers
    what's going on. We do not intend to use this type for functions such as <code class="code">failwithf</code>
    that always raise an exception.<br>
</div>
<br>
<h6 id="6_Errorhandling">Error handling</h6><br>
<br>
See exn.mli<br>
<br>
<h6 id="6_InputOutput">Input Output</h6><br>
<br>
<h6 id="6_triplehandling">triple handling </h6><br>
<br>
<h6 id="6_Optionhandling">Option handling</h6><br>
<br>
<h6 id="6_Functionsfromfnml">Functions from fn.ml</h6><br>
<br>
<code class="code">Or_error.ok_exn</code><br>
<br>
<code class="code">Or_error.error</code><br>
<br>
<code class="code">with_return f</code> allows for something like the return statement in C within <code class="code">f</code>.  There
   are three ways <code class="code">f</code> can terminate:
<p>

   1. If <code class="code">f</code> calls <code class="code">r.return x</code>, then <code class="code">x</code> is returned by <code class="code">with_return</code>.
   2. If <code class="code">f</code> evaluates to a value <code class="code">x</code>, then <code class="code">x</code> is returned by <code class="code">with_return</code>.
   3. If <code class="code">f</code> raises an exception, it escapes <code class="code">with_return</code>.
<p>

   Here is a typical example:
<p>

   <pre class="codepre"><code class="code">   let find l ~f =
     with_return (fun r -&gt;
        List.iter l ~f:(fun x -&gt; if f x then r.return (Some x));
        None
      )
   </code></pre>
<p>

   It is only because of a deficiency of ML types that <code class="code">with_return</code> doesn't have type:
<p>

   <pre class="codepre"><code class="code"> val with_return : 'a. (('a -&gt; ('b. 'b)) -&gt; 'a) -&gt; 'a </code></pre>
<p>

   but we can slightly increase the scope of 'b, without changing the meaning of the type
   and then we get
<p>

   <pre class="codepre"><code class="code">   type 'a return = { return : 'b . 'a -&gt; b }
   val with_return : ('a return -&gt; 'a) -&gt; 'a
   </code></pre>
<p>

   But the actual reason we chose to use a record type with polymorphic field is that
   otherwise we would have to clobber the namespace of functions with <code class="code">return</code> and that is
   undesirable because <code class="code">return</code> would get hidden as soon as we open any monad. We
   considered names different than <code class="code">return</code> but everything seemed worse than just having
   <code class="code">return</code> as a record field. We are clobbering the namespace of record fields but that
   is much more acceptable.<br>
<br>
We disable <code class="code">==</code> and <code class="code">!=</code> and replace them with the longer and more mnemonic
    <code class="code">phys_equal</code> because they too easily lead to mistakes (for example they don't even
    work right on Int64 or Float).  One can usually use the <code class="code">equal</code> function for a
    specific type, or use (=) or (&lt;&gt;) for built in types like char, int, float,<br>
<br>
See <code class="code">module : Staged</code> for documentation<br>
<br>
Raised if malloc in C bindings fail (errno * size).<br>
<br>
<h6 id="6_Deprecatedoperations">Deprecated operations</h6>
<p>

  The following section contains definitions that hide operations from the standard
  library that are considered problematic or confusing, or simply redundant.<br>
<br>
we have our own version of these two, the INRIA version doesn't release the runtime
    lock.<br>
</body></html>