<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Std.Interval.html">
<link rel="next" href="Std.Lock_file.html">
<link rel="Up" href="Std.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Array_permute" rel="Chapter" href="Array_permute.html">
<link title="Avltree" rel="Chapter" href="Avltree.html">
<link title="Backtrace" rel="Chapter" href="Backtrace.html">
<link title="Bag" rel="Chapter" href="Bag.html">
<link title="Bigbuffer" rel="Chapter" href="Bigbuffer.html">
<link title="Bigbuffer_internal" rel="Chapter" href="Bigbuffer_internal.html">
<link title="Bigstring" rel="Chapter" href="Bigstring.html">
<link title="Bigstring_marshal" rel="Chapter" href="Bigstring_marshal.html">
<link title="Bigsubstring" rel="Chapter" href="Bigsubstring.html">
<link title="Binable" rel="Chapter" href="Binable.html">
<link title="Binable0" rel="Chapter" href="Binable0.html">
<link title="Binary_packing" rel="Chapter" href="Binary_packing.html">
<link title="Blang" rel="Chapter" href="Blang.html">
<link title="Bool" rel="Chapter" href="Bool.html">
<link title="Bounded_int_table" rel="Chapter" href="Bounded_int_table.html">
<link title="Bucket" rel="Chapter" href="Bucket.html">
<link title="Byte_units" rel="Chapter" href="Byte_units.html">
<link title="Caml" rel="Chapter" href="Caml.html">
<link title="Command" rel="Chapter" href="Command.html">
<link title="Common" rel="Chapter" href="Common.html">
<link title="Commutative_group" rel="Chapter" href="Commutative_group.html">
<link title="Comparable" rel="Chapter" href="Comparable.html">
<link title="Comparable_intf" rel="Chapter" href="Comparable_intf.html">
<link title="Comparator" rel="Chapter" href="Comparator.html">
<link title="Constrained_float" rel="Chapter" href="Constrained_float.html">
<link title="Container" rel="Chapter" href="Container.html">
<link title="Core_arg" rel="Chapter" href="Core_arg.html">
<link title="Core_array" rel="Chapter" href="Core_array.html">
<link title="Core_bin_prot" rel="Chapter" href="Core_bin_prot.html">
<link title="Core_char" rel="Chapter" href="Core_char.html">
<link title="Core_condition" rel="Chapter" href="Core_condition.html">
<link title="Core_field" rel="Chapter" href="Core_field.html">
<link title="Core_filename" rel="Chapter" href="Core_filename.html">
<link title="Core_gc" rel="Chapter" href="Core_gc.html">
<link title="Core_hashtbl" rel="Chapter" href="Core_hashtbl.html">
<link title="Core_hashtbl_intf" rel="Chapter" href="Core_hashtbl_intf.html">
<link title="Core_int" rel="Chapter" href="Core_int.html">
<link title="Core_int32" rel="Chapter" href="Core_int32.html">
<link title="Core_int63" rel="Chapter" href="Core_int63.html">
<link title="Core_int64" rel="Chapter" href="Core_int64.html">
<link title="Core_lazy" rel="Chapter" href="Core_lazy.html">
<link title="Core_list" rel="Chapter" href="Core_list.html">
<link title="Core_map" rel="Chapter" href="Core_map.html">
<link title="Core_map_intf" rel="Chapter" href="Core_map_intf.html">
<link title="Core_map_unit_tests" rel="Chapter" href="Core_map_unit_tests.html">
<link title="Core_mutex" rel="Chapter" href="Core_mutex.html">
<link title="Core_nativeint" rel="Chapter" href="Core_nativeint.html">
<link title="Core_printexc" rel="Chapter" href="Core_printexc.html">
<link title="Core_printf" rel="Chapter" href="Core_printf.html">
<link title="Core_queue" rel="Chapter" href="Core_queue.html">
<link title="Core_random" rel="Chapter" href="Core_random.html">
<link title="Core_set" rel="Chapter" href="Core_set.html">
<link title="Core_set_intf" rel="Chapter" href="Core_set_intf.html">
<link title="Core_set_unit_tests" rel="Chapter" href="Core_set_unit_tests.html">
<link title="Core_sexp" rel="Chapter" href="Core_sexp.html">
<link title="Core_stack" rel="Chapter" href="Core_stack.html">
<link title="Core_string" rel="Chapter" href="Core_string.html">
<link title="Core_sys" rel="Chapter" href="Core_sys.html">
<link title="Core_thread" rel="Chapter" href="Core_thread.html">
<link title="Core_unix" rel="Chapter" href="Core_unix.html">
<link title="Core_weak" rel="Chapter" href="Core_weak.html">
<link title="Crc" rel="Chapter" href="Crc.html">
<link title="Daemon" rel="Chapter" href="Daemon.html">
<link title="Date" rel="Chapter" href="Date.html">
<link title="Day_of_week" rel="Chapter" href="Day_of_week.html">
<link title="Dequeue" rel="Chapter" href="Dequeue.html">
<link title="Doubly_linked" rel="Chapter" href="Doubly_linked.html">
<link title="Equal" rel="Chapter" href="Equal.html">
<link title="Error" rel="Chapter" href="Error.html">
<link title="Exn" rel="Chapter" href="Exn.html">
<link title="Flags" rel="Chapter" href="Flags.html">
<link title="Flags_intf" rel="Chapter" href="Flags_intf.html">
<link title="Float" rel="Chapter" href="Float.html">
<link title="Floatable" rel="Chapter" href="Floatable.html">
<link title="Float_intf" rel="Chapter" href="Float_intf.html">
<link title="Float_robust_compare" rel="Chapter" href="Float_robust_compare.html">
<link title="Fn" rel="Chapter" href="Fn.html">
<link title="Force_once" rel="Chapter" href="Force_once.html">
<link title="Fqueue" rel="Chapter" href="Fqueue.html">
<link title="Hashable" rel="Chapter" href="Hashable.html">
<link title="Hash_heap" rel="Chapter" href="Hash_heap.html">
<link title="Hash_queue" rel="Chapter" href="Hash_queue.html">
<link title="Hash_set" rel="Chapter" href="Hash_set.html">
<link title="Hash_set_intf" rel="Chapter" href="Hash_set_intf.html">
<link title="Heap" rel="Chapter" href="Heap.html">
<link title="Heap_block" rel="Chapter" href="Heap_block.html">
<link title="Host_and_port" rel="Chapter" href="Host_and_port.html">
<link title="Identifiable" rel="Chapter" href="Identifiable.html">
<link title="In_channel" rel="Chapter" href="In_channel.html">
<link title="Info" rel="Chapter" href="Info.html">
<link title="Intable" rel="Chapter" href="Intable.html">
<link title="Int_conversions" rel="Chapter" href="Int_conversions.html">
<link title="Interfaces" rel="Chapter" href="Interfaces.html">
<link title="Interned_string" rel="Chapter" href="Interned_string.html">
<link title="Interval" rel="Chapter" href="Interval.html">
<link title="Interval_intf" rel="Chapter" href="Interval_intf.html">
<link title="Int_intf" rel="Chapter" href="Int_intf.html">
<link title="Int_math" rel="Chapter" href="Int_math.html">
<link title="Int_replace_polymorphic_compare" rel="Chapter" href="Int_replace_polymorphic_compare.html">
<link title="Int_set" rel="Chapter" href="Int_set.html">
<link title="Invariant" rel="Chapter" href="Invariant.html">
<link title="Iobuf" rel="Chapter" href="Iobuf.html">
<link title="Iobuf_debug" rel="Chapter" href="Iobuf_debug.html">
<link title="Iobuf_intf" rel="Chapter" href="Iobuf_intf.html">
<link title="Iobuf_tests" rel="Chapter" href="Iobuf_tests.html">
<link title="Linux_ext" rel="Chapter" href="Linux_ext.html">
<link title="Lock_file" rel="Chapter" href="Lock_file.html">
<link title="Make_substring" rel="Chapter" href="Make_substring.html">
<link title="Memo" rel="Chapter" href="Memo.html">
<link title="Monad" rel="Chapter" href="Monad.html">
<link title="Month" rel="Chapter" href="Month.html">
<link title="Mutex0" rel="Chapter" href="Mutex0.html">
<link title="Nano_mutex" rel="Chapter" href="Nano_mutex.html">
<link title="Never_returns" rel="Chapter" href="Never_returns.html">
<link title="No_polymorphic_compare" rel="Chapter" href="No_polymorphic_compare.html">
<link title="Nothing" rel="Chapter" href="Nothing.html">
<link title="Nothing0" rel="Chapter" href="Nothing0.html">
<link title="Ofday" rel="Chapter" href="Ofday.html">
<link title="Only_in_test" rel="Chapter" href="Only_in_test.html">
<link title="Option" rel="Chapter" href="Option.html">
<link title="Ordered_collection_common" rel="Chapter" href="Ordered_collection_common.html">
<link title="Ordering" rel="Chapter" href="Ordering.html">
<link title="Or_error" rel="Chapter" href="Or_error.html">
<link title="Out_channel" rel="Chapter" href="Out_channel.html">
<link title="Pid" rel="Chapter" href="Pid.html">
<link title="Piecewise_linear" rel="Chapter" href="Piecewise_linear.html">
<link title="Piecewise_linear_intf" rel="Chapter" href="Piecewise_linear_intf.html">
<link title="Polymorphic_compare" rel="Chapter" href="Polymorphic_compare.html">
<link title="Polymorphic_compare_intf" rel="Chapter" href="Polymorphic_compare_intf.html">
<link title="Pretty_printer" rel="Chapter" href="Pretty_printer.html">
<link title="Process_env" rel="Chapter" href="Process_env.html">
<link title="Quickcheck" rel="Chapter" href="Quickcheck.html">
<link title="Ref" rel="Chapter" href="Ref.html">
<link title="Result" rel="Chapter" href="Result.html">
<link title="Robustly_comparable" rel="Chapter" href="Robustly_comparable.html">
<link title="Set_once" rel="Chapter" href="Set_once.html">
<link title="Sexpable" rel="Chapter" href="Sexpable.html">
<link title="Signal" rel="Chapter" href="Signal.html">
<link title="Source_code_position" rel="Chapter" href="Source_code_position.html">
<link title="Source_code_position0" rel="Chapter" href="Source_code_position0.html">
<link title="Span" rel="Chapter" href="Span.html">
<link title="Squeue" rel="Chapter" href="Squeue.html">
<link title="Stable" rel="Chapter" href="Stable.html">
<link title="Stable_containers" rel="Chapter" href="Stable_containers.html">
<link title="Stable_internal" rel="Chapter" href="Stable_internal.html">
<link title="Stable_unit_test" rel="Chapter" href="Stable_unit_test.html">
<link title="Stable_unit_test_intf" rel="Chapter" href="Stable_unit_test_intf.html">
<link title="Staged" rel="Chapter" href="Staged.html">
<link title="Std" rel="Chapter" href="Std.html">
<link title="Std_common" rel="Chapter" href="Std_common.html">
<link title="Std_kernel" rel="Chapter" href="Std_kernel.html">
<link title="Std_internal" rel="Chapter" href="Std_internal.html">
<link title="Stringable" rel="Chapter" href="Stringable.html">
<link title="String_id" rel="Chapter" href="String_id.html">
<link title="Substring" rel="Chapter" href="Substring.html">
<link title="Substring_intf" rel="Chapter" href="Substring_intf.html">
<link title="T" rel="Chapter" href="T.html">
<link title="Thread_safe_queue" rel="Chapter" href="Thread_safe_queue.html">
<link title="Time" rel="Chapter" href="Time.html">
<link title="Time_internal" rel="Chapter" href="Time_internal.html">
<link title="Timer" rel="Chapter" href="Timer.html">
<link title="Timing_wheel" rel="Chapter" href="Timing_wheel.html">
<link title="Timing_wheel_intf" rel="Chapter" href="Timing_wheel_intf.html">
<link title="Timing_wheel_unit_tests" rel="Chapter" href="Timing_wheel_unit_tests.html">
<link title="Tuple" rel="Chapter" href="Tuple.html">
<link title="Type_equal" rel="Chapter" href="Type_equal.html">
<link title="Union_find" rel="Chapter" href="Union_find.html">
<link title="Unique_id" rel="Chapter" href="Unique_id.html">
<link title="Unique_id_intf" rel="Chapter" href="Unique_id_intf.html">
<link title="Unit" rel="Chapter" href="Unit.html">
<link title="Univ" rel="Chapter" href="Univ.html">
<link title="Univ_map" rel="Chapter" href="Univ_map.html">
<link title="Unpack_buffer" rel="Chapter" href="Unpack_buffer.html">
<link title="User_and_group" rel="Chapter" href="User_and_group.html">
<link title="Uuid" rel="Chapter" href="Uuid.html">
<link title="Validate" rel="Chapter" href="Validate.html">
<link title="With_return" rel="Chapter" href="With_return.html">
<link title="Word_size" rel="Chapter" href="Word_size.html">
<link title="Zone" rel="Chapter" href="Zone.html"><link title="Creation" rel="Section" href="#1_Creation">
<link title="Accessors" rel="Section" href="#1_Accessors">
<link title="Changing the limits" rel="Section" href="#1_Changingthelimits">
<link title="Changing the window" rel="Section" href="#1_Changingthewindow">
<link title="Getting and setting data" rel="Section" href="#1_Gettingandsettingdata">
<link title="I/O" rel="Section" href="#1_IO">
<link title="Creation" rel="Section" href="#1_Creation">
<link title="Accessors" rel="Section" href="#1_Accessors">
<link title="Changing the limits" rel="Section" href="#1_Changingthelimits">
<link title="Changing the window" rel="Section" href="#1_Changingthewindow">
<link title="Getting and setting data" rel="Section" href="#1_Gettingandsettingdata">
<link title="I/O" rel="Section" href="#1_IO">
<title>Std.Iobuf</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Std.Interval.html" title="Std.Interval">Previous</a>
&nbsp;<a class="up" href="Std.html" title="Std">Up</a>
&nbsp;<a class="post" href="Std.Lock_file.html" title="Std.Lock_file">Next</a>
</div>
<h1>Module <a href="type_Std.Iobuf.html">Std.Iobuf</a></h1>
<pre><span class="keyword">module</span> Iobuf: <code class="type">Iobuf</code></pre><hr width="100%">
<pre><span id="TYPEno_seek"><span class="keyword">type</span> <code class="type"></code>no_seek</span> </pre>
<div class="info">
<code class="code">no_seek</code> and <code class="code">seek</code> are defined and used in a similar manner to
    <code class="code">read_only</code> and <code class="code">read_write</code>.
<p>
like <code class="code">read_only</code><br>
</div>

<pre><span id="TYPEseek"><span class="keyword">type</span> <code class="type"></code>seek</span> = private <code class="type"><a href="Iobuf.html#TYPEno_seek">no_seek</a></code> </pre>
<div class="info">
like <code class="code">read_write</code><br>
</div>

<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type">(+'data_perm_read_write, +'seek_permission)</code> t</span> </pre>

<pre><span class="keyword">include</span> Invariant.S2</pre>
<br>
<h1 id="1_Creation">Creation</h1><br>
<pre><span id="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">len:int -> ('a, 'b) <a href="Iobuf.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">create ~len</code> creates a new iobuf, backed by a bigstring of length <code class="code">len</code>,
    with the limits and window set to the entire bigstring.<br>
</div>
<pre><span id="VALof_bigstring"><span class="keyword">val</span> of_bigstring</span> : <code class="type">?pos:int -> ?len:int -> Bigstring.t -> ('a, 'b) <a href="Iobuf.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">of_bigstring bigstring ~pos ~len</code> returns an iobuf backed by <code class="code">bigstring</code>, with the
    window and limits specified starting at <code class="code">pos</code> and of length <code class="code">len</code>.<br>
</div>
<pre><span id="VALof_string"><span class="keyword">val</span> of_string</span> : <code class="type">string -> ('a, 'b) <a href="Iobuf.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">of_string s</code> returns a new iobuf whose contents are <code class="code">s</code>.<br>
</div>
<pre><span id="VALsub"><span class="keyword">val</span> sub</span> : <code class="type">?pos:int -> ?len:int -> ('d, 'a) <a href="Iobuf.html#TYPEt">t</a> -> ('d, 'b) <a href="Iobuf.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">sub t ~pos ~len</code> returns a new iobuf with limits and window set to the subrange of
    <code class="code">t</code> specified by <code class="code">pos</code> and <code class="code">len</code>.  <code class="code">sub</code> preserves data permissions, but allows
    arbitrary seek permissions on the resulting iobuf.<br>
</div>
<br>
<h1 id="1_Accessors">Accessors</h1><br>
<pre><span id="VALcapacity"><span class="keyword">val</span> capacity</span> : <code class="type">('a, 'b) <a href="Iobuf.html#TYPEt">t</a> -> int</code></pre><div class="info">
<code class="code">capacity t</code> returns the size of <code class="code">t</code>'s limits subrange.  The capacity of an iobuf can
    be reduced via <code class="code">narrow</code>.<br>
</div>
<pre><span id="VALlength"><span class="keyword">val</span> length</span> : <code class="type">('a, 'b) <a href="Iobuf.html#TYPEt">t</a> -> int</code></pre><div class="info">
<code class="code">length t</code> returns the size of <code class="code">t</code>'s window.<br>
</div>
<pre><span id="VALis_empty"><span class="keyword">val</span> is_empty</span> : <code class="type">('a, 'b) <a href="Iobuf.html#TYPEt">t</a> -> bool</code></pre><div class="info">
<code class="code">is_empty t</code> is <code class="code">length t = 0</code>.<br>
</div>
<br>
<h1 id="1_Changingthelimits">Changing the limits</h1><br>
<pre><span id="VALnarrow"><span class="keyword">val</span> narrow</span> : <code class="type">('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> unit</code></pre><div class="info">
<code class="code">narrow t</code> sets <code class="code">t</code>'s limits to the current window.<br>
</div>
<br>
<h1 id="1_Changingthewindow">Changing the window</h1><br>
<pre><span class="keyword">module</span> <a href="Iobuf.Snapshot.html">Snapshot</a>: <code class="code">sig</code> <a href="Iobuf.Snapshot.html">..</a> <code class="code">end</code><code class="type">  with type ('d, 'w) iobuf := ('d, 'w) t</code></pre><div class="info">
One can call <code class="code">snapshot t</code> to get a snapshot of the front of the window, and then later
    restore that snapshot.
</div>
<pre><span id="VALsnapshot"><span class="keyword">val</span> snapshot</span> : <code class="type">('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> <a href="Iobuf.Snapshot.html#TYPEt">Snapshot.t</a></code></pre><pre><span id="VALadvance"><span class="keyword">val</span> advance</span> : <code class="type">('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> int -> unit</code></pre><div class="info">
<code class="code">advance t amount</code> advances the front of the window by <code class="code">amount</code>.  It is an error to
    advance past the back of the window or the lower limit.<br>
</div>
<pre><span id="VALresize"><span class="keyword">val</span> resize</span> : <code class="type">('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> len:int -> unit</code></pre><div class="info">
<code class="code">resize t</code> sets the length of <code class="code">t</code>'s window, provided it does not exceed limits.<br>
</div>
<pre><span id="VALrewind"><span class="keyword">val</span> rewind</span> : <code class="type">('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> unit</code></pre><div class="info">
<code class="code">rewind t</code> sets the front of the window to the lower limit.<br>
</div>
<pre><span id="VALreset"><span class="keyword">val</span> reset</span> : <code class="type">('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> unit</code></pre><div class="info">
<code class="code">reset t</code> sets the window to the limits.<br>
</div>
<pre><span id="VALflip"><span class="keyword">val</span> flip</span> : <code class="type">('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> unit</code></pre><div class="info">
<code class="code">flip t</code> sets the window to range from the lower limit to the front of the old window.
    This is typically called after a series of <code class="code">Fill</code>s, to reposition the window in
    preparation to <code class="code">Consume</code> the newly written data.<br>
</div>
<pre><span id="VALcompact"><span class="keyword">val</span> compact</span> : <code class="type">(Common.read_write, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> unit</code></pre><div class="info">
<code class="code">compact t</code> copies data from the window to the lower limit of the iobuf and sets the
    window to range from the end of the copied data to the upper limit.  This is typically
    called after a series of <code class="code">Consume</code>s to save unread data and prepare for the next
    series of <code class="code">Fill</code>s and <code class="code">flip</code>.<br>
</div>
<br>
<h1 id="1_Gettingandsettingdata">Getting and setting data</h1><br>
<br>
"consume" and "fill" functions access data at the front of the window and advance the
    front of the window.  "peek" and "poke" functions access data but do not advance the
    window.<br>
<pre><span id="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type">?len:int -> ('a, 'b) <a href="Iobuf.html#TYPEt">t</a> -> string</code></pre><div class="info">
<code class="code">to_string t</code> returns the bytes in <code class="code">t</code> as a string.  It does not alter the window.<br>
</div>
<pre><span id="VALconsume_into_string"><span class="keyword">val</span> consume_into_string</span> : <code class="type">?pos:int -> ?len:int -> ('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> string -> unit</code></pre><div class="info">
<code class="code">consume_into_string t s ~pos ~len</code> reads <code class="code">len</code> bytes from <code class="code">t</code>, advancing <code class="code">t</code>'s window
    accordingly, and writes them into <code class="code">s</code> starting at <code class="code">pos</code>.  By default <code class="code">pos = 0</code> and
    <code class="code">len = String.length s - pos</code>.  It is an error if <code class="code">pos</code> and <code class="code">len</code> don't specify a
    valid region of <code class="code">s</code> or <code class="code">len &gt; length t</code>.<br>
</div>
<pre><span id="VALconsume_into_bigstring"><span class="keyword">val</span> consume_into_bigstring</span> : <code class="type">?pos:int -> ?len:int -> ('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> Bigstring.t -> unit</code></pre><pre><span class="keyword">module</span> <a href="Iobuf.Consume.html">Consume</a>: <code class="type">Accessors</code><code class="type">  with type ('a, 'd, 'w) t = ('d, seek) t -> 'a</code></pre><div class="info">
<code class="code">Consume.string t ~len</code> reads <code class="code">len</code> characters (all, by default) from <code class="code">t</code> into a new
    string and advances the front of the window accordingly.
</div>
<pre><span class="keyword">module</span> <a href="Iobuf.Fill.html">Fill</a>: <code class="type">Accessors</code><code class="type">  with type ('a, 'd, 'w) t = (read_write, seek) t -> 'a -> unit</code></pre><div class="info">
<code class="code">Peek</code> and <code class="code">Poke</code> functions access a value at <code class="code">pos</code> from the front of the window
    and do not advance.
</div>
<pre><span class="keyword">module</span> <a href="Iobuf.Peek.html">Peek</a>: <code class="type">Accessors</code><code class="type">  with type ('a, 'd, 'w) t = ('d, 'w) t -> pos:int -> 'a</code></pre><pre><span class="keyword">module</span> <a href="Iobuf.Poke.html">Poke</a>: <code class="type">Accessors</code><code class="type">  with type ('a, 'd, 'w) t = (read_write, 'w) t -> pos:int -> 'a -> unit</code></pre><pre><span class="keyword">module</span> <a href="Iobuf.Unsafe.html">Unsafe</a>: <code class="code">sig</code> <a href="Iobuf.Unsafe.html">..</a> <code class="code">end</code></pre><div class="info">
<code class="code">Unsafe</code> has submodules that are like their corresponding module, except with no range
    checks.
</div>
<pre><span id="VALfill_bin_prot"><span class="keyword">val</span> fill_bin_prot</span> : <code class="type">(Common.read_write, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -><br>       'a <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.writer -> 'a -> unit Or_error.t</code></pre><div class="info">
<code class="code">fill_bin_prot</code> writes a bin-prot value to the front of the window, prefixed by its
    length, and advances the front of the window by the amount written.  <code class="code">fill_bin_prot</code>
    returns an error if the window is too small to write the value.
<p>

    <code class="code">consume_bin_prot t reader</code> reads a bin-prot value from the front of the window, which
    should have been written using <code class="code">fill_bin_prot</code>, and advances the window by the amount
    read.  <code class="code">consume_bin_prot</code> returns an error if there is not a complete message in the
    window and in that case the window is left unchanged.<br>
</div>
<pre><span id="VALconsume_bin_prot"><span class="keyword">val</span> consume_bin_prot</span> : <code class="type">('b, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> 'a <a href="../bin_prot/Type_class.html">Bin_prot.Type_class</a>.reader -> 'a Or_error.t</code></pre><pre><span id="VALtransfer"><span class="keyword">val</span> transfer</span> : <code class="type">?len:int -><br>       src:('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -><br>       dst:(Common.read_write, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> unit</code></pre><div class="info">
<code class="code">transfer</code> blits <code class="code">len</code> bytes from the front of <code class="code">src</code> to the front of <code class="code">dst</code>, advancing
    both.  It is an error if <code class="code">len &gt; length src || len &gt; length dst || phys_equal src
    dst</code>.<br>
</div>
<pre><span id="VALmemmove"><span class="keyword">val</span> memmove</span> : <code class="type">(Common.read_write, 'a) <a href="Iobuf.html#TYPEt">t</a> -><br>       src_pos:int -> dst_pos:int -> len:int -> unit</code></pre><div class="info">
<code class="code">memmove</code> blits <code class="code">len</code> bytes from <code class="code">src_pos</code> to <code class="code">dst_pos</code> in an iobuf, both relative to
    the front of the window.  The window is not advanced.<br>
</div>
<br>
<h1 id="1_IO">I/O</h1><br>
<pre><span id="VALread_assume_fd_is_nonblocking"><span class="keyword">val</span> read_assume_fd_is_nonblocking</span> : <code class="type">(Common.read_write, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -><br>       Iobuf_intf.Unix.File_descr.t -> int</code></pre><div class="info">
<code class="code">Iobuf</code> has analogs of various <code class="code">Bigstring</code> functions.  These analogs advance by the
    amount written/read.<br>
</div>
<pre><span id="VALpread_assume_fd_is_nonblocking"><span class="keyword">val</span> pread_assume_fd_is_nonblocking</span> : <code class="type">(Common.read_write, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -><br>       Iobuf_intf.Unix.File_descr.t -> offset:int -> int</code></pre><pre><span id="VALrecvfrom_assume_fd_is_nonblocking"><span class="keyword">val</span> recvfrom_assume_fd_is_nonblocking</span> : <code class="type">(Common.read_write, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -><br>       Iobuf_intf.Unix.File_descr.t -> int * Iobuf_intf.Unix.sockaddr</code></pre><pre><span id="VALrecvmmsg_assume_fd_is_nonblocking"><span class="keyword">val</span> recvmmsg_assume_fd_is_nonblocking</span> : <code class="type">(Iobuf_intf.Unix.File_descr.t -><br>        ?count:int -><br>        ?srcs:Iobuf_intf.Unix.sockaddr array -><br>        (Common.read_write, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> array -> int)<br>       Or_error.t</code></pre><pre><span id="VALsend_nonblocking_no_sigpipe"><span class="keyword">val</span> send_nonblocking_no_sigpipe</span> : <code class="type">unit -><br>       (('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> Iobuf_intf.Unix.File_descr.t -> int option)<br>       Or_error.t</code></pre><pre><span id="VALsendto_nonblocking_no_sigpipe"><span class="keyword">val</span> sendto_nonblocking_no_sigpipe</span> : <code class="type">unit -><br>       (('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -><br>        Iobuf_intf.Unix.File_descr.t -> Iobuf_intf.Unix.sockaddr -> int option)<br>       Or_error.t</code></pre><pre><span id="VALwrite_assume_fd_is_nonblocking"><span class="keyword">val</span> write_assume_fd_is_nonblocking</span> : <code class="type">('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> Iobuf_intf.Unix.File_descr.t -> int</code></pre><pre><span id="VALpwrite_assume_fd_is_nonblocking"><span class="keyword">val</span> pwrite_assume_fd_is_nonblocking</span> : <code class="type">('a, <a href="Iobuf.html#TYPEseek">seek</a>) <a href="Iobuf.html#TYPEt">t</a> -> Iobuf_intf.Unix.File_descr.t -> offset:int -> int</code></pre><pre><span id="VALsexp_of_no_seek"><span class="keyword">val</span> sexp_of_no_seek</span> : <code class="type"><a href="Iobuf.html#TYPEno_seek">no_seek</a> -> <a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t</code></pre><div class="info">
like <code class="code">read_only</code><br>
</div>
<pre><span id="VALsexp_of_seek"><span class="keyword">val</span> sexp_of_seek</span> : <code class="type"><a href="Iobuf.html#TYPEseek">seek</a> -> <a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t</code></pre><div class="info">
like <code class="code">read_write</code><br>
</div>
<pre><span id="VALsexp_of_t"><span class="keyword">val</span> sexp_of_t</span> : <code class="type">('data_perm_read_write -> <a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t) -><br>       ('seek_permission -> <a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t) -><br>       ('data_perm_read_write, 'seek_permission) <a href="Iobuf.html#TYPEt">t</a> -> <a href="../sexplib/Sexp.html">Sexplib.Sexp</a>.t</code></pre><div class="info">
The first type parameter controls whether the iobuf can be written to.
    The second type parameter controls whether the window and limits can be changed.
<p>

    To allow <code class="code">read_write</code> or <code class="code">read_only</code> access, a function's type uses <code class="code">_</code> rather than
    <code class="code">read_only</code> as the type argument to <code class="code">t</code>.  Analogously, to allow <code class="code">no_seek</code> or <code class="code">seek</code>
    access, a function's type uses <code class="code">_</code> rather than <code class="code">no_seek</code> as the type argument to <code class="code">t</code>.
    Using <code class="code">_</code> allows the function to be directly applied to either permission.  Using
    a specific permission would require code to use coercion <code class="code">:&gt;</code>.<br>
</div>
<br>
<h1 id="1_Creation">Creation</h1><br>
<br>
<code class="code">create ~len</code> creates a new iobuf, backed by a bigstring of length <code class="code">len</code>,
    with the limits and window set to the entire bigstring.<br>
<br>
<code class="code">of_bigstring bigstring ~pos ~len</code> returns an iobuf backed by <code class="code">bigstring</code>, with the
    window and limits specified starting at <code class="code">pos</code> and of length <code class="code">len</code>.<br>
<br>
default is <code class="code">0</code><br>
<br>
default is <code class="code">Bigstring.length bigstring - pos</code><br>
<br>
<code class="code">of_string s</code> returns a new iobuf whose contents are <code class="code">s</code>.<br>
<br>
<code class="code">sub t ~pos ~len</code> returns a new iobuf with limits and window set to the subrange of
    <code class="code">t</code> specified by <code class="code">pos</code> and <code class="code">len</code>.  <code class="code">sub</code> preserves data permissions, but allows
    arbitrary seek permissions on the resulting iobuf.<br>
<br>
<h1 id="1_Accessors">Accessors</h1><br>
<br>
<code class="code">capacity t</code> returns the size of <code class="code">t</code>'s limits subrange.  The capacity of an iobuf can
    be reduced via <code class="code">narrow</code>.<br>
<br>
<code class="code">length t</code> returns the size of <code class="code">t</code>'s window.<br>
<br>
<code class="code">is_empty t</code> is <code class="code">length t = 0</code>.<br>
<br>
<h1 id="1_Changingthelimits">Changing the limits</h1><br>
<br>
<code class="code">narrow t</code> sets <code class="code">t</code>'s limits to the current window.<br>
<br>
<h1 id="1_Changingthewindow">Changing the window</h1><br>
<br>
One can call <code class="code">snapshot t</code> to get a snapshot of the front of the window, and then later
    restore that snapshot.  This is useful for speculatively parsing, and then rewinding
    when there isn't enough data to finish.
<p>

    Using a snapshot with a different iobuf, even a sub iobuf of the snapshotted one, has
    unspecified results.  An exception may be raised, or a silent error may occur.
    However, the safety guarantees of the iobuf will not be violated, i.e., the attempt
    will not enlarge the limits of the subject iobuf.<br>
<br>
<code class="code">advance t amount</code> advances the front of the window by <code class="code">amount</code>.  It is an error to
    advance past the back of the window or the lower limit.<br>
<br>
<code class="code">resize t</code> sets the length of <code class="code">t</code>'s window, provided it does not exceed limits.<br>
<br>
<code class="code">rewind t</code> sets the front of the window to the lower limit.<br>
<br>
<code class="code">reset t</code> sets the window to the limits.<br>
<br>
<code class="code">flip t</code> sets the window to range from the lower limit to the front of the old window.
    This is typically called after a series of <code class="code">Fill</code>s, to reposition the window in
    preparation to <code class="code">Consume</code> the newly written data.<br>
<br>
<code class="code">compact t</code> copies data from the window to the lower limit of the iobuf and sets the
    window to range from the end of the copied data to the upper limit.  This is typically
    called after a series of <code class="code">Consume</code>s to save unread data and prepare for the next
    series of <code class="code">Fill</code>s and <code class="code">flip</code>.<br>
<br>
<h1 id="1_Gettingandsettingdata">Getting and setting data</h1><br>
<br>
"consume" and "fill" functions access data at the front of the window and advance the
    front of the window.  "peek" and "poke" functions access data but do not advance the
    window.<br>
<br>
<code class="code">to_string t</code> returns the bytes in <code class="code">t</code> as a string.  It does not alter the window.<br>
<br>
<code class="code">consume_into_string t s ~pos ~len</code> reads <code class="code">len</code> bytes from <code class="code">t</code>, advancing <code class="code">t</code>'s window
    accordingly, and writes them into <code class="code">s</code> starting at <code class="code">pos</code>.  By default <code class="code">pos = 0</code> and
    <code class="code">len = String.length s - pos</code>.  It is an error if <code class="code">pos</code> and <code class="code">len</code> don't specify a
    valid region of <code class="code">s</code> or <code class="code">len &gt; length t</code>.<br>
<br>
<code class="code">Consume.string t ~len</code> reads <code class="code">len</code> characters (all, by default) from <code class="code">t</code> into a new
    string and advances the front of the window accordingly.<br>
<br>
<code class="code">Peek</code> and <code class="code">Poke</code> functions access a value at <code class="code">pos</code> from the front of the window
    and do not advance.<br>
<br>
<code class="code">Unsafe</code> has submodules that are like their corresponding module, except with no range
    checks.  Hence, mistaken uses can cause segfaults.  Be careful!<br>
<br>
<code class="code">fill_bin_prot</code> writes a bin-prot value to the front of the window, prefixed by its
    length, and advances the front of the window by the amount written.  <code class="code">fill_bin_prot</code>
    returns an error if the window is too small to write the value.
<p>

    <code class="code">consume_bin_prot t reader</code> reads a bin-prot value from the front of the window, which
    should have been written using <code class="code">fill_bin_prot</code>, and advances the window by the amount
    read.  <code class="code">consume_bin_prot</code> returns an error if there is not a complete message in the
    window and in that case the window is left unchanged.<br>
<br>
<code class="code">transfer</code> blits <code class="code">len</code> bytes from the front of <code class="code">src</code> to the front of <code class="code">dst</code>, advancing
    both.  It is an error if <code class="code">len &gt; length src || len &gt; length dst || phys_equal src
    dst</code>.<br>
<br>
default is <code class="code">min (length src) (length dst)</code><br>
<br>
<code class="code">memmove</code> blits <code class="code">len</code> bytes from <code class="code">src_pos</code> to <code class="code">dst_pos</code> in an iobuf, both relative to
    the front of the window.  The window is not advanced.<br>
<br>
<h1 id="1_IO">I/O</h1><br>
<br>
<code class="code">Iobuf</code> has analogs of various <code class="code">Bigstring</code> functions.  These analogs advance by the
    amount written/read.<br>
</body></html>